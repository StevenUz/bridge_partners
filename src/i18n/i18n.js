const STORAGE_KEY = 'bridge-partners-language';

export const languages = {
  en: 'English',
  bg: 'Български'
};

const translations = {
  en: {
    brand: 'Bridge Partners',
    navHome: 'Home',
    navLobby: 'Lobby',
    navTable: 'Table View',
    navStats: 'Statistics',
    navResources: 'Resources',
    navImpTable: 'IMP Table',
    navObserver: 'Observer',
    navAdmin: 'Admin',
    navLogout: 'Logout',
    navLeaveTable: 'Leave Table',
    roleAdmin: 'Admin',
    roleAuthorized: 'Authorized',
    roleUnauthorized: 'Unauthorized',
    roleAdminShort: 'Admin',
    roleAuthorizedShort: 'Auth',
    roleUnauthorizedShort: 'Unauth',
    currentRole: 'Current role',
    language: 'Language',
    heroTitle: 'Play Bridge With Partners Anywhere',
    heroSubtitle: 'Register, join a lobby, sit at a table, and start the deal.',
    ctaRegister: 'Register',
    ctaSignIn: 'Sign In',
    tabSignIn: 'Sign In & Enter Lobby',
    formName: 'Display Name',
    formEmail: 'Email Address',
    formPassword: 'Password',
    formRemember: 'Remember me on this device',
    registrationRequired: 'Please fill in all fields',
    registrationFailed: 'Registration failed',
    usernameOrEmailExists: 'Username or email already exists',
    usernameAndEmailExist: 'Username and email already exist',
    usernameExistsOnly: 'Username already exists',
    emailExistsOnly: 'Email already exists',
    loginRequired: 'Please enter username and password',
    invalidCredentials: 'Invalid username or password',
    loginPleaseWait: 'Please wait...',
    playerAlreadyIn: 'Sorry, a player is already in',
    sessionInactiveWarningTitle: 'Inactivity warning',
    sessionInactiveWarningMessage: 'No activity detected for 15 minutes. You will be logged out in 1 minute unless you interact.',
    sessionTakeoverWarningTitle: 'Login detected from another device',
    sessionTakeoverWarningMessage: 'If you are still here, move the mouse or press a button within 1 minute to keep this session.',
    sessionWarningCountdown: 'Seconds remaining',
    sessionStillHere: 'I am still here',
    sessionInactiveLogoutReason: 'Logged out due to inactivity',
    sessionTakeoverLogoutReason: 'Logged out due to duplicate login attempt',
    sessionReplacedReason: 'Your session was replaced by a new login',
    lobbyTitle: 'Lobby',
    lobbyCreate: 'Create New Table',
    lobbyLimit: 'Up to 5 active tables',
    lobbyLimitReached: 'Table limit reached',
    lobbyLimitMessage: 'All 5 tables are currently active. Please wait for a spot to open up, or join an existing table as a player or observer.',
    lobbyAvailable: 'Available Tables',
    table: 'Table',
    tableSeats: 'Seats',
    tablePlayers: 'Players',
    tableObservers: 'Observers',
    tableJoin: 'Join Table',
    tableJoinAs: 'Join as',
    observe: 'Observe',
    yourPosition: 'Your Position',
    observerMode: 'Observer Mode',
    chatLobby: 'Lobby chat',
    chatTable: 'Table chat',
    chatPlaceholder: 'Type a message (max 50 chars)',
    chatSend: 'Send',
    changePosition: 'Change perspective - click to see from another player\'s view',
    cards: 'cards',
    dealCards: 'Deal Cards',
    tableStatusReady: 'Ready?',
    biddingTitle: 'Bidding',
    biddingTurn: 'Turn',
    biddingHistory: 'History',
    biddingEnded: 'Bidding ended',
    pass: 'Pass',
    double: 'Double',
    redouble: 'Redouble',
    dealer: 'Dealer',
    hcpBottom: 'Bottom points',
    hcpTop: 'Top points',
    hcpLeft: 'Left points',
    hcpRight: 'Right points',
    hcpSouth: 'South points',
    hcpNorth: 'North points',
    hcpWest: 'West points',
    hcpEast: 'East points',
    seatSouth: 'South',
    seatWest: 'West',
    seatNorth: 'North',
    seatEast: 'East',
    seatShortSouth: 'S',
    seatShortWest: 'W',
    seatShortNorth: 'N',
    seatShortEast: 'E',
    seatOpen: 'Open',
    seatObserver: 'Observer',
    tableViewTitle: 'Table View',
    tableStatusWaiting: 'Waiting for four players to start dealing.',
    contract: 'Contract',
    resetGame: 'Reset game',
    resetGameConfirmTitle: 'Reset game?',
    resetGameConfirm: 'Reset the current deal, bidding, and ready state for this table? This action cannot be undone.',
    resetGameConfirmYes: 'Reset',
    resetGameConfirmNo: 'Cancel',
    statisticsTitle: 'Statistics',
    statisticsComingSoon: 'Player stats, boards, and scores will live here.',
    partnersTitle: 'Partnerships',
    participationTitle: 'Game Participation',
    contractsTitle: 'Contract Success',
    scoringTitle: 'Points & Slams',
    playerCol: 'Player',
    partnerCol: 'Partner',
    gamesCol: 'Games',
    winsCol: 'Wins',
    winRateCol: 'Win %',
    totalGamesCol: 'Total',
    declarerCol: 'Decl',
    dummyCol: 'Dmmy',
    defenderCol: 'Def',
    madeCol: 'Made',
    failedCol: 'Failed',
    defeatCol: 'Defeat',
    defeatPctCol: 'Def%',
    scoreCol: 'Score',
    smallSlamsCol: 'SSl',
    grandSlamsCol: 'GSl',
    languagePicker: 'Choose language',
    saveLanguage: 'Save language',
    vulnerable: 'Vulnerable',
    notVulnerable: 'Not Vulnerable',
    vulnerableShort: 'V',
    notVulnerableShort: 'NV',
    deal_results: 'Deal Results',
    tricks_won: 'Tricks Won',
    partnership_data: 'Partnership Data',
    points: 'Points',
    fit: 'Fit',
    no_fit: 'No fit',
    obligation: 'Obligation',
    belongs_to: 'Belongs to',
    no_obligation: 'No obligation (equal distribution)',
    obligation_value: 'Obligation value',
    result: 'Result',
    contract_result: 'Contract result',
    made_exactly: 'Made exactly',
    made_with_overtricks: 'Made with overtricks',
    failed: 'Failed',
    score: 'Score',
    bidding_result: 'Bidding result',
    four_passes: 'Four passes - no contract',
    final_score: 'Final score',
    contract_points: 'Contract points',
    bonuses: 'Bonuses',
    next_deal: 'Next Deal',
    waiting_for_others: 'Waiting for other players',
    other_players_viewing_results: 'Other players are still reviewing the results...',
    declarer: 'Declarer',
    resourcesTitle: 'Resources & Documentation',
    resourcesSubtitle: 'Learn Bridge rules, game guides, and more',
    resourcesDocuments: 'PDF Documents',
    resourcesDownload: 'Download',
    resourcesHelpfulLinks: 'Helpful Links',
    resourcesVisit: 'Visit',
    resourcesSupport: 'Help & Support',
    resourcesFaq: 'Frequently Asked Questions',
    resourcesFaqDesc: 'Find answers to common questions about Bridge and how to play',
    resourcesTutorials: 'Video Tutorials',
    resourcesTutorialsDesc: 'Watch step-by-step guides to learn how to play Bridge',
    resourcesLearnMore: 'Learn More',
    faqComingSoon: 'FAQ section coming soon!',
    tutorialsComingSoon: 'Video tutorials coming soon!',
    faqQuestion1: 'What is contract bridge?',
    faqAnswer1: 'Contract bridge is a strategic card game played by four players in two partnerships. It uses a standard 52-card deck and consists of bidding and play.',
    faqQuestion2: 'What is the objective of the game?',
    faqAnswer2: 'The goal is to win the auction, set a contract, and then take at least six tricks plus the number of tricks bid.',
    faqQuestion3: 'How many players are involved?',
    faqAnswer3: 'Four players sit at a table in two partnerships: North/South versus East/West.',
    faqQuestion4: 'What is bidding?',
    faqAnswer4: 'Bidding (the auction) is the phase where players communicate hand strength and decide the final contract, including the trump suit or No Trump.',
    faqQuestion5: 'What is a trump suit?',
    faqAnswer5: 'A trump suit outranks the other suits during play. In a No Trump (NT) contract, there is no trump suit.',
    faqQuestion6: 'What is a trick?',
    faqAnswer6: 'A trick consists of four cards, one played by each player. The highest card in the led suit (or highest trump) wins the trick.',
    faqQuestion7: 'Who is the declarer?',
    faqAnswer7: 'The declarer is the player who first mentioned the final contract suit in the winning partnership.',
    faqQuestion8: 'What is a game contract?',
    faqAnswer8: 'A game contract (such as 3NT, 4♥, 4♠, 5♣, 5♦) scores bonus points if successfully made.',
    faqQuestion9: 'Is bridge difficult for beginners?',
    faqAnswer9: 'It can seem complex at first due to bidding systems, but with practice and study it becomes logical and highly rewarding.',
    faqQuestion10: 'How can I start learning?',
    faqAnswer10: 'You can join a local bridge club, take beginner lessons, or play online using beginner-friendly platforms and systems like Standard American or 2/1 Game Force.',
    tutorialWatchNow: 'Watch Now'
  },
  bg: {
    brand: 'Bridge Partners',
    navHome: 'Начало',
    navLobby: 'Лоби',
    navTable: 'Маса',
    navStats: 'Статистика',
    navResources: 'Ресурси',
    navImpTable: 'IMP Таблица',
    navObserver: 'Наблюдател',
    navAdmin: 'Админ',
    navLogout: 'Изход',
    navLeaveTable: 'Напусни масата',
    roleAdmin: 'Админ',
    roleAuthorized: 'Оторизиран',
    roleUnauthorized: 'Неоторизиран',
    roleAdminShort: 'Адм.',
    roleAuthorizedShort: 'Отор.',
    roleUnauthorizedShort: 'Неот.',
    currentRole: 'Текуща роля',
    language: 'Език',
    heroTitle: 'Играйте бридж с партньори навсякъде',
    heroSubtitle: 'Регистрирайте се, влезте в лоби, седнете на маса и започнете раздаването.',
    ctaRegister: 'Регистрация',
    ctaSignIn: 'Вход',
    tabSignIn: 'Вход в лобито',
    formName: 'Име за показване',
    formEmail: 'Имейл адрес',
    formPassword: 'Парола',
    formRemember: 'Запомни ме на това устройство',
    registrationRequired: 'Моля, попълнете всички полета',
    registrationFailed: 'Регистрацията неудачна',
    usernameOrEmailExists: 'Потребителското име или имейлът вече съществува',
    usernameAndEmailExist: 'Потребителското име и имейлът вече съществуват',
    usernameExistsOnly: 'Потребителското име вече съществува',
    emailExistsOnly: 'Имейлът вече съществува',
    loginRequired: 'Моля, въведете потребителско име и парола',
    invalidCredentials: 'Невалидни потребителско име или парола',
    loginPleaseWait: 'Please wait...',
    playerAlreadyIn: 'Sorry, a player is already in',
    sessionInactiveWarningTitle: 'Предупреждение за неактивност',
    sessionInactiveWarningMessage: 'Няма активност 15 минути. Ще бъдете излезли след 1 минута, ако няма действие.',
    sessionTakeoverWarningTitle: 'Засечен е вход от друго устройство',
    sessionTakeoverWarningMessage: 'Ако сте активни, преместете курсора или натиснете бутон до 1 минута, за да запазите сесията.',
    sessionWarningCountdown: 'Оставащи секунди',
    sessionStillHere: 'Все още съм тук',
    sessionInactiveLogoutReason: 'Изход поради неактивност',
    sessionTakeoverLogoutReason: 'Изход поради опит за дублиран вход',
    sessionReplacedReason: 'Вашата сесия е заменена от нов вход',
    lobbyTitle: 'Лоби',
    lobbyCreate: 'Нова маса',
    lobbyLimit: 'До 5 активни маси',
    lobbyLimitReached: 'Достигнат лимит на маси',
    lobbyLimitMessage: 'Всички 5 маси са заети в момента. Моля, изчакайте да се освободи място или се присъединете към съществуваща маса като играч или наблюдател.',
    lobbyAvailable: 'Свободни маси',
    table: 'Маса',
    tableSeats: 'Места',
    tablePlayers: 'Играчи',
    tableObservers: 'Наблюдатели',
    tableJoin: 'Влез на масата',
    tableJoinAs: 'Влез като',
    observe: 'Наблюдавай',
    yourPosition: 'Вашата позиция',
    observerMode: 'Режим на наблюдател',
    chatLobby: 'Чат в лобито',
    chatTable: 'Чат за масата',
    chatPlaceholder: 'Въведи съобщение (до 50 символа)',
    chatSend: 'Изпрати',
    changePosition: 'Промени перспектива - кликни, за да видиш от друг играч',
    cards: 'карти',
    dealCards: 'Раздай картите',
    tableStatusReady: 'Готови?',
    biddingTitle: 'Залагане',
    biddingTurn: 'Ред',
    biddingHistory: 'История',
    biddingEnded: 'Залагането приключи',
    pass: 'Пас',
    double: 'Контра',
    redouble: 'Реконтра',
    dealer: 'Раздаващ',
    hcpBottom: 'Точки (долу)',
    hcpTop: 'Точки (горе)',
    hcpLeft: 'Точки (ляво)',
    hcpRight: 'Точки (дясно)',
    hcpSouth: 'Точки на Юг',
    hcpNorth: 'Точки на Север',
    hcpWest: 'Точки на Запад',
    hcpEast: 'Точки на Изток',
    seatSouth: 'Юг',
    seatWest: 'Запад',
    seatNorth: 'Север',
    seatEast: 'Изток',
    seatShortSouth: 'Ю',
    seatShortWest: 'З',
    seatShortNorth: 'С',
    seatShortEast: 'И',
    seatOpen: 'Свободно',
    seatObserver: 'Наблюдател',
    tableViewTitle: 'Изглед на маса',
    tableStatusWaiting: 'Изчакват се четирима играчи за старт.',
    contract: 'Договор',
    resetGame: 'Нулирай играта',
    resetGameConfirmTitle: 'Нулиране на играта?',
    resetGameConfirm: 'Да се нулират текущото раздаване, залагане и готовност за тази маса? Действието е необратимо.',
    resetGameConfirmYes: 'Нулирай',
    resetGameConfirmNo: 'Отказ',
    statisticsTitle: 'Статистика',
    statisticsComingSoon: 'Тук ще бъдат резултати, бордове и точки.',
    partnersTitle: 'Партньорства',
    participationTitle: 'Участие в игри',
    contractsTitle: 'Успех на договори',
    scoringTitle: 'Точки и шлемове',
    playerCol: 'Играч',
    partnerCol: 'Партньор',
    gamesCol: 'Игри',
    winsCol: 'Побе',
    winRateCol: 'Win %',
    totalGamesCol: 'Всич',
    declarerCol: 'Раз',
    dummyCol: 'Мор',
    defenderCol: 'Защ',
    madeCol: 'Изка',
    failedCol: 'Неиз',
    defeatCol: 'Вкар',
    defeatPctCol: 'Def%',
    scoreCol: 'Точ',
    smallSlamsCol: 'МШл',
    grandSlamsCol: 'ГШл',
    languagePicker: 'Избери език',
    saveLanguage: 'Запази езика',
    vulnerable: 'В Зона',
    notVulnerable: 'Без Зона',
    vulnerableShort: 'З',
    notVulnerableShort: 'БЗ',
    deal_results: 'Резултат от раздаването',
    tricks_won: 'Взети ръце',
    partnership_data: 'Данни за двойките',
    points: 'Точки',
    fit: 'Фит',
    no_fit: 'Без фит',
    obligation: 'Задължение',
    belongs_to: 'Принадлежи на',
    no_obligation: 'Без задължение (равно разпределение)',
    obligation_value: 'Стойност на задължението',
    result: 'Резултат',
    contract_result: 'Изпълнение на договора',
    made_exactly: 'Точно изпълнен',
    made_with_overtricks: 'Изпълнен с добри',
    failed: 'Неуспешен',
    score: 'Точки',
    bidding_result: 'Резултат от наддаването',
    four_passes: '4 паса - без договор',
    final_score: 'Краен резултат',
    contract_points: 'Точки от договора',
    bonuses: 'Премии',
    next_deal: 'Следващо раздаване',
    waiting_for_others: 'Изчакване на останалите играчи',
    other_players_viewing_results: 'Останалите играчи все още разглеждат резултатите...',
    declarer: 'Разиграващ',
    resourcesTitle: 'Ресурси и документация',
    resourcesSubtitle: 'Научете правила, ръководства и още много',
    resourcesDocuments: 'PDF Документи',
    resourcesDownload: 'Сваляне',
    resourcesHelpfulLinks: 'Полезни връзки',
    resourcesVisit: 'Посети',
    resourcesSupport: 'Помощ и поддршка',
    resourcesFaq: 'Често задавани въпроси',
    resourcesFaqDesc: 'Намерете отговори на често задавани въпроси за бридж',
    resourcesTutorials: 'Видео уроци',
    resourcesTutorialsDesc: 'Гледайте пошаголови ръководства за научаване на бридж',
    resourcesLearnMore: 'Научи се повече',
    faqComingSoon: 'Раздел с часто задавани въпроси - идва скоро!',
    tutorialsComingSoon: 'Видео уроци - идват скоро!',
    faqQuestion1: 'Какво е спортен бридж?',
    faqAnswer1: 'Спортният бридж е стратегическа игра с карти за четирима играчи, разделени на два отбора. Играе се със стандартно тесте от 52 карти и включва наддаване (аукцион) и разиграване.',
    faqQuestion2: 'Каква е целта на играта?',
    faqAnswer2: 'Целта е чрез наддаване да определите договор (контракт) и след това да спечелите необходимия брой взятки (минимум 6 + обявените в договора).',
    faqQuestion3: 'Колко играчи участват?',
    faqAnswer3: 'Играят четирима играчи, седнали по двойки един срещу друг – Север/Юг срещу Изток/Запад.',
    faqQuestion4: 'Какво представлява наддаването?',
    faqAnswer4: 'Наддаването е процесът, в който двойките обявяват колко взятки смятат, че могат да спечелят и коя боя ще бъде коз (или без коз – NT).',
    faqQuestion5: 'Какво е „коз"?',
    faqAnswer5: 'Коз е боята, която има по-висока сила от останалите по време на разиграването. Ако няма коз, играта е „без коз" (No Trump).',
    faqQuestion6: 'Какво означава „взятка"?',
    faqAnswer6: 'Взятка е комплект от четири карти – по една от всеки играч. Най-високата карта в изиграната боя (или най-високият коз) печели взятката.',
    faqQuestion7: 'Как се определя кой разиграва?',
    faqAnswer7: 'Играчът от двойката, която печели наддаването, и който първи е обявил крайната боя, става разиграващ (декларатор).',
    faqQuestion8: 'Какво е „манш"?',
    faqAnswer8: 'Манш е договор с по-висока стойност (например 3NT, 4♥, 4♠, 5♣, 5♦), който носи бонус точки при успешно изпълнение.',
    faqQuestion9: 'Трудна ли е играта за начинаещи?',
    faqAnswer9: 'В началото може да изглежда сложна заради наддаването, но с практика и обучение правилата стават интуитивни.',
    faqQuestion10: 'Как мога да започна да уча?',
    faqAnswer10: 'Можете да се запишете в бридж клуб, да използвате онлайн платформи или да започнете с базови системи като Standard American или 2/1 Game Force.',
    tutorialWatchNow: 'Гледай сега'
  }
};

export function getLanguage() {
  const stored = localStorage.getItem(STORAGE_KEY);
  return stored && languages[stored] ? stored : 'en';
}

export function setLanguage(language) {
  const value = languages[language] ? language : 'en';
  localStorage.setItem(STORAGE_KEY, value);
  return value;
}

export function t(language, key) {
  const lang = languages[language] ? language : 'en';
  return translations[lang][key] ?? translations.en[key] ?? key;
}

export function applyTranslations(root, language) {
  if (!root) return;
  root.querySelectorAll('[data-i18n]').forEach((node) => {
    const key = node.getAttribute('data-i18n');
    node.textContent = t(language, key);
  });
}
